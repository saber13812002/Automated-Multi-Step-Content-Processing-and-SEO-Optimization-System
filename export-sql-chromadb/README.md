# ุฑุงูููุง ุฑุงูโุงูุฏุงุฒ ู ุงุณุชูุงุฏู

ุงู ูพุฑูฺู ุงุณฺฉุฑูพุช ุจุฑุง ุฎูุงูุฏู ุฏุงุฏูโูุง `book_pages.sql` ู ุจุงุฑฺฏุฐุงุฑ ูพุงุฑุงฺฏุฑุงูโูุง ุชูุฒโุดุฏู ุฏุฑ ChromaDB ูุฑุงูู ูโฺฉูุฏ. ููฺูู ุงุณฺฉุฑูพุช ูุณุชูู ุจุฑุง ุชุณุช ู ูุดุงูุฏู ูุชุงุฌ ุฌุณุชุฌู ูุนูุง ุฏุฑ ูุฌููุนูโ ุงุฌุงุฏ ุดุฏู ูุฌูุฏ ุฏุงุฑุฏ.

> ๐ ุจุฑุง ูุดุงูุฏู ููุฑุณุช ฺฉุงูู ูฺฺฏโูุง ู ูุงุจูุชโูุง ูพุงุฏูโุณุงุฒ ุดุฏูุ ุจู [FEATURES.md](FEATURES.md) ูุฑุงุฌุนู ฺฉูุฏ.

## ููุฑุณุช ูุทุงูุจ

- [ูพุดโูุงุฒูุง](#ูพุดโูุงุฒูุง)
- [ูุตุจ ูุงุจุณุชฺฏโูุง](#ูุตุจ-ูุงุจุณุชฺฏโูุง)
- [ูพฺฉุฑุจูุฏ ูุชุบุฑูุง ูุญุท](#ูพฺฉุฑุจูุฏ-ูุชุบุฑูุง-ูุญุท)
- [ุงุฌุฑุง ุงุณฺฉุฑูพุช ุตุงุฏุฑุงุช](#ุงุฌุฑุง-ุงุณฺฉุฑูพุช-ุตุงุฏุฑุงุช)
- [ุชุณุช ู ุงุฑุฒุงุจ ูุชุงุฌ](#ุชุณุช-ู-ุงุฑุฒุงุจ-ูุชุงุฌ)
- [ุณุฑูุณ ูุจ ุฌุณุชุฌู ูุนูุง](#ุณุฑูุณ-ูุจ-ุฌุณุชุฌู-ูุนูุง)
- [ุฑุงูโุงูุฏุงุฒ ูุญุท Stage (ุชุณุช ู ุชูุณุนู)](#ุฑุงูโุงูุฏุงุฒ-ูุญุท-stage-ุชุณุช-ู-ุชูุณุนู)
- [ุฑุงูโุงูุฏุงุฒ ุณุฑูุณ ุจุง Systemd](#ุฑุงูโุงูุฏุงุฒ-ุณุฑูุณ-ุจุง-systemd)

**ุฑุงูููุงูุง ูุฑุชุจุท:**
- [QUICK_FIX_STAGE.md](QUICK_FIX_STAGE.md) - ุฑุงูููุง ุณุฑุน ุญู ูุดฺฉูุงุช Stage
- [STAGE_SETUP.md](STAGE_SETUP.md) - ุฑุงูููุง ฺฉุงูู Stage Environment
- [systemd/INSTALL_UVICORN_SERVICE.md](systemd/INSTALL_UVICORN_SERVICE.md) - ุฑุงูููุง ูุตุจ Systemd Service
- [README.web_service.md](README.web_service.md) - ุฑุงูููุง ฺฉุงูู Web Service
- [HUGGINGFACE_MODELS.md](HUGGINGFACE_MODELS.md) - ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุง HuggingFace
- [README.list_openai_embeddings.md](README.list_openai_embeddings.md) - ุฑุงูููุง ุงุณฺฉุฑูพุช ูุณุช ฺฉุฑุฏู ุงูุจุฏูฺฏโูุง OpenAI
- [IMPROVEMENTS.md](IMPROVEMENTS.md) - ูพุดููุงุฏุงุช ุจูุจูุฏ ู ุจูููโุณุงุฒ ุณุณุชู

## ูพุดโูุงุฒูุง

- Python 3.10 ุง ุฌุฏุฏุชุฑ
- ุฏุณุชุฑุณ ุจู ุณุฑูุณ ChromaDB (ููฺฉุงู ุง ุงุฒ ุทุฑู ุดุจฺฉู)
- ฺฉูุฏ API ุจุฑุง OpenAI (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ ุจุฑุฏุงุฑูุง OpenAI)

## ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
python -m venv .venv
.venv\Scripts\activate             # ุฏุฑ ููุฏูุฒ
# ุง
sudo apt update
sudo apt install python3.12-venv
python3 -m venv .venv
source .venv/bin/activate          # ุฏุฑ ูููฺฉุณ/ูฺฉ

# ูุตุจ dependencies ุงุตู (ุจุฑุง web service ู export scripts)
pip install --upgrade pip
pip install -r web_service/requirements.txt

# ูุตุจ build tools (ุงุฎุชุงุฑ - ููุท ุจุฑุง development)
pip install -r requirements.txt
```

> **ูฺฉุชู ููู:** ูุงู `requirements.txt` ุฏุฑ root ููุท ุดุงูู build tools ุงุณุช. ุจุฑุง ุงุฌุฑุง ุณุฑูุณ ูุจ ุง ุงุณฺฉุฑูพุชโูุง exportุ ุจุงุฏ `web_service/requirements.txt` ุฑุง ูุตุจ ฺฉูุฏ.

## ูพฺฉุฑุจูุฏ ูุชุบุฑูุง ูุญุท

ูโุชูุงูุฏ ูุชุบุฑูุง ุฑุง ุจู ุตูุฑุช ุฏุณุช ุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุงู `.env` ุชูุธู ฺฉูุฏ. ูููโุชุฑู ฺฏุฒููโูุง:

- `BOOK_PAGES_SQL`: ูุณุฑ ูุงู SQL (ูพุดโูุฑุถ `book_pages.sql`)
- `CHROMA_HOST`, `CHROMA_PORT`, `CHROMA_SSL`, `CHROMA_API_KEY`: ุชูุธูุงุช ุงุชุตุงู ุจู ุณุฑูุฑ ChromaDB
- `CHROMA_COLLECTION`: ูุงู ฺฉุงูฺฉุดู ููุตุฏ (ูพุดโูุฑุถ `book_pages`)
- `OPENAI_API_KEY`: ฺฉูุฏ OpenAI ุจุฑุง ุชููุฏ ุงูุจุฏูฺฏ
- `CHUNK_MAX_LENGTH`: ุทูู ูุฑ ูุทุนู ูุชู (ูพุดโูุฑุถ ตฐฐ ฺฉุงุฑุงฺฉุชุฑ)
- `CHUNK_CONTEXT_LENGTH`: ุทูู ูุชู ุฒููู ูุจู ู ุจุนุฏ ุงุฒ ูุฑ ูุทุนู (ูพุดโูุฑุถ ฑฐฐ ฺฉุงุฑุงฺฉุชุฑ)
- `CHROMA_BATCH_SIZE`: ุงูุฏุงุฒู ุฏุณุชู ุจุฑุง ุจุงุฑฺฏุฐุงุฑ (ูพุดโูุฑุถ ถด)

## ุงุฌุฑุง ุงุณฺฉุฑูพุช ุตุงุฏุฑุงุช

```bash
python export-sql-backup-to-chromadb.py \
  --sql-path book_pages.sql \
  --collection book_pages \
  --host 10.0.0.5 \
  --port 8000 \
  --embedding-provider openai \
  --reset
```


```bash
python3 export-sql-backup-to-chromadb.py   --sql-path book_pages_mini.sql   --collection book_pages_mini   --host 192.168.1.68   --port 8000  --embedding-provider openai   --reset
```


- ฺฏุฒูู `--reset` ฺฉุงูฺฉุดู ูุจู ุฑุง ุญุฐู ู ุฏุงุฏูโูุง ุฌุฏุฏ ุฑุง ุฌุงฺฏุฒู ูโฺฉูุฏ.
- ุงฺฏุฑ ุงุฒ ChromaDB ุชูฺฉุงุฑ (Persist Client) ุงุณุชูุงุฏู ูโฺฉูุฏุ ฺฏุฒูู `--persist-directory ./chroma-store` ุฑุง ุงุถุงูู ฺฉูุฏ.
- ุฏุฑ ุตูุฑุช ูุจูุฏ ฺฉูุฏ OpenAI ูโุชูุงูุฏ `--embedding-provider none` ุฑุง ุงูุชุฎุงุจ ฺฉูุฏุ ุฏุฑ ุงู ุญุงูุช ูุฑุถ ูโุดูุฏ ุณูุช ุณุฑูุฑ ุงูุจุฏูฺฏ ุชููุฏ ูโุดูุฏ.

### ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุง HuggingFace

ุงู ุงุณฺฉุฑูพุช ุงุฒ ูุฏูโูุง HuggingFace (ูุซู ParsBERTุ AraBERT) ูุฒ ูพุดุชุจุงู ูโฺฉูุฏ. ุจุฑุง ุฌุฒุฆุงุช ฺฉุงููุ ูุซุงูโูุง ู ูพุดููุงุฏุงุช ูุฏูโูุงุ ุจู [HUGGINGFACE_MODELS.md](HUGGINGFACE_MODELS.md) ูุฑุงุฌุนู ฺฉูุฏ.

**ูุซุงู ุณุฑุน ุจุง ParsBERT:**

```bash
python export-sql-backup-to-chromadb.py \
  --sql-path book_pages.sql \
  --collection book_pages_parsbert \
  --embedding-provider huggingface \
  --embedding-model "HooshvareLab/bert-base-parsbert-uncased" \
  --batch-size 64
```

**ูุตุจ ูุงุจุณุชฺฏโูุง HuggingFace:**

```bash
pip install transformers torch numpy
```

### ููุทู ูุทุนูโุจูุฏ

1. ูุฑ ุฑฺฉูุฑุฏ ุตูุญู ุงุฒ SQL ุฎูุงูุฏู ู HTML ุขู ุจู ูุชู ุณุงุฏู ุชุจุฏู ูโุดูุฏ.
2. ูุชู ุจุฑ ุงุณุงุณ ูพุงุฑุงฺฏุฑุงู (ูุงุตููโ ุฏู ุฎุท) ุฌุฏุง ูโุดูุฏ.
3. ูุฑ ูพุงุฑุงฺฏุฑุงู ุจู ูุทุนุงุช ุญุฏุงฺฉุซุฑ ฒฐฐ ฺฉุงุฑุงฺฉุชุฑ ุชูุณู ูโุดูุฏ.
4. ุจุฑุง ูุฑ ูุทุนู ฑฐฐ ฺฉุงุฑุงฺฉุชุฑ ูุจู ู ุจุนุฏ ุจูโุนููุงู ุฒููู ุงุถุงูู ูโุดูุฏ ุชุง ููููู ุญูุธ ุดูุฏ.
5. ูุฑ ูุทุนู ุจู ููุฑุงู ูุชุงุฏุชุง (ฺฉุชุงุจุ ุจุฎุดุ ููฺฉุ ุดูุงุฑู ูพุงุฑุงฺฏุฑุงู ู Segment) ุฏุฑ ChromaDB ุฐุฎุฑู ูโุดูุฏ.

## ุชุณุช ู ุงุฑุฒุงุจ ูุชุงุฌ

### ุจุฑุฑุณ ูุชุงุฌ ุฌุณุชุฌู

ูพุณ ุงุฒ ูพุงุงู ุจุงุฑฺฏุฐุงุฑ ูโุชูุงูุฏ ุงุฒ ุงุณฺฉุฑูพุช ุฒุฑ ุจุฑุง ุงุฑุณุงู ฺฉูุฆุฑ ู ุจุฑุฑุณ ูุชุงุฌ ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
python verify_chroma_export.py \
  --collection book_pages \
  --query "ุฏู ฺุณุช" \
  --host 10.0.0.5 \
  --port 8000 \
  --top-k 5
```

ุฎุฑูุฌ ุดุงูู ุดูุงุณูุ ูุงุตููุ ููฺฉ ููุจุน ู ูพุดโููุงุด ูุฑ ูุทุนู ุงุณุช ุชุง ุจุชูุงูุฏ ฺฉูุช ุฏุงุฏูโูุง ุฐุฎุฑูโุดุฏู ุฑุง ุงุฑุฒุงุจ ฺฉูุฏ.

### ูุณุช ฺฉุฑุฏู ุงูุจุฏูฺฏโูุง OpenAI

ุจุฑุง ูุดุงูุฏู ุชูุงู ฺฉุงูฺฉุดูโูุง ุงูุจุฏูฺฏ OpenAI ู ุงุทูุงุนุงุช ุขูโูุง:

```bash
python list_openai_embeddings.py --include-db-info
```

ุงู ุงุณฺฉุฑูพุช ุงุทูุงุนุงุช ฺฉุงูู ุงุฒ ฺฉุงูฺฉุดูโูุงุ ูุฏูโูุงุ ูุถุนุช ูุนุงู/ุบุฑูุนุงู ู ุขูุงุฑ ุฑุง ููุงุด ูโุฏูุฏ. ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ ุจู [README.list_openai_embeddings.md](README.list_openai_embeddings.md) ูุฑุงุฌุนู ฺฉูุฏ.

## ูฺฉุงุช ุชฺฉูู

- ุฏุฑ ูุชุงุฏุชุงุ ููฺฉ ุงุตู ุตูุญู (`source_link`) ุฐุฎุฑู ูโุดูุฏ ุชุง ุงุฑุฌุงุน ุจู ููุจุน ุญูุธ ฺฏุฑุฏุฏ.
- ููุฏ `error` ุงุฒ ูุงู SQL ูุฒ ููุชูู ูโุดูุฏ ุชุง ุฏุฑ ุตูุฑุช ูุฌูุฏ ุฎุทุง ุง ูุดุฏุงุฑ ุฏุฑ ููุจุน ุจุชูุงูุฏ ุขู ุฑุง ุฑุฏุงุจ ฺฉูุฏ.
- ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ูุทุนูโุจูุฏ ูุชูุงูุชุ ูพุงุฑุงูุชุฑูุง `--max-length` ู `--context` ุฑุง ุชุบุฑ ุฏูุฏ.
- **ุงูุจุฏูฺฏโูุง ฺฺฏููู ุณุงุฎุชู ูโุดููุฏุ**
  - ูพุงุฑุงูุชุฑ `--embedding-provider` ุชุนู ูโฺฉูุฏ ฺฉู ุขุง ุจุฑุฏุงุฑูุง ููฺฏุงู ูุงุฑุฏ ฺฉุฑุฏู ุฏุงุฏู ุณุงุฎุชู ุดููุฏ ุง ุฎุฑ.
  - ููุฏุงุฑ ูพุดโูุฑุถ `openai` ุจุง ูุฏู `text-embedding-3-small` ุจุฑุง ูุฑ ุณฺฏููุช ฺฉ ุจุฑุฏุงุฑ ฑตณถ ุจุนุฏ ุชููุฏ ูโฺฉูุฏ ู ุขู ุฑุง ุจู ฺฉุงูฺฉุดู ุงุถุงูู ูโููุงุฏุ ุงู ุญุงูุช ุจุฑุง ููุช ููุงุณุจ ุงุณุช ฺฉู ูโุฎูุงูุฏ ูููโฺุฒ ุณูุช ุงุณฺฉุฑูพุช ุงูุฌุงู ุดูุฏ.
  - ุงฺฏุฑ ฺฏุฒููโ `--embedding-provider none` ุฑุง ุงูุชุฎุงุจ ฺฉูุฏุ ููุท ูุชู ู ูุชุงุฏุชุง ุฐุฎุฑู ูโุดููุฏ ู ุจุงุฏ ุฏุฑ ูุฑุงุญู ุจุนุฏ (ูุซูุงู ุฑู ุณุฑูุฑ Chroma ุง ุณุฑูุณ ุฏฺฏุฑ) ุงูุจุฏูฺฏ ุณุงุฎุชู ุดูุฏ. ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุฌุณุชโูุฌู ุจุฑุฏุงุฑ ูุชุฌูโุง ูุฎูุงูุฏ ุฏุงุดุช.
  - ููฺฏุงู ุฌุณุชโูุฌู (ฺู ุจุง `verify_chroma_export.py` ู ฺู ุจุง APIโูุง ุฏฺฏุฑ) ููุงู ูุฏู ุจุงุฏ ุจุฑุง ุชููุฏ ุงูุจุฏูฺฏ ุณุคุงู ุงุณุชูุงุฏู ุดูุฏุ ฺูู Chroma ุจุฑุฏุงุฑ ฺฉูุฆุฑ ุฑุง ุจุง ุจุฑุฏุงุฑูุง ุฐุฎุฑูโุดุฏู ููุงุณู ูโฺฉูุฏ.

## ุณุฑูุณ ูุจ ุฌุณุชุฌู ูุนูุง

ฺฉ ุณุฑูุณ FastAPI ุฏุฑ ูุณุฑ `web_service/` ุงุถุงูู ุดุฏู ุชุง ฺฉูุฆุฑ ฺฉุงุฑุจุฑ ุฑุง ฺฏุฑูุชูุ ุจุง ููุงู ูุฏู `text-embedding-3-small` ุงูุจุฏูฺฏ ฺฉูุฏ ู ุฑู ChromaDB ุฌุณุชุฌู ุงูุฌุงู ุฏูุฏ.

### ุงุฌุฑุง ูุญู

```bash
cd export-sql-chromadb
python -m venv .venv
.venv\Scripts\activate  # ุง source .venv/bin/activate
pip install --upgrade pip
pip install -r web_service/requirements.txt
uvicorn web_service.app:app --reload --host 0.0.0.0 --port 8080
```

> **ูฺฉุชู:** ุงฺฏุฑ ุฎุทุง `ModuleNotFoundError` ุฏุฑุงูุช ฺฉุฑุฏุฏ (ูุซูุงู `anyio` ุง ุณุงุฑ ูุงฺููโูุง)ุ ูุทูุฆู ุดูุฏ ฺฉู:
> 1. Virtual environment ูุนุงู ุงุณุช (`which python` ุจุงุฏ ูุณุฑ `.venv` ุฑุง ูุดุงู ุฏูุฏ)
> 2. ููู dependencies ุงุฒ `web_service/requirements.txt` ูุตุจ ุดุฏูโุงูุฏ
> 3. ุฏุฑ ุตูุฑุช ูุงุฒุ `pip install -r web_service/requirements.txt` ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏ

ุณุฑูุณ ุงุฒ ููุงู `.env` ุงุณุชูุงุฏู ูโฺฉูุฏ. ูุณุฑูุง:

- `POST /search` ูุฑูุฏ:

```json
{
  "query": "ุขููุฒุด ุนูุงุฏ ฺุณุชุ",
  "top_k": 5
}
```

ุฎุฑูุฌ ุดุงูู `id`, `distance`, `score`, `document`, `metadata` ู ุงุทูุงุนุงุช ูุฏู ุงุณุช.

- `GET /health` ูุถุนุช ChromaDBุ Redisุ ู ุขูุงุฑ ฺฉุงูฺฉุดู ุฑุง ุจุงุฒูโฺฏุฑุฏุงูุฏ.

### ูุชุบุฑูุง ูุญุท ูุฑุชุจุท ุจุง ุณุฑูุณ ูุจ

- `APP_HOST` ู `APP_PORT` ุจุฑุง ฺฉูุชุฑู ุขุฏุฑุณ ู ูพูุฑุช ุณุฑูุณ (ูพุดโูุฑุถ: `0.0.0.0:8080`)
- `REDIS_URL` ุง ุชุฑฺฉุจ `REDIS_HOST`, `REDIS_PORT`, `REDIS_DB`, `REDIS_PASSWORD`
- ุณุงุฑ ูุชุบุฑูุง ููุงู ููุงุฏุฑ ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ุงุณฺฉุฑูพุชโูุง ุตุงุฏุฑุงุช ู ุงุนุชุจุงุฑุณูุฌ (`CHROMA_*`, `OPENAI_API_KEY`, `EMBEDDING_MODEL`, ...)

### Docker

```bash
cd export-sql-chromadb
docker build -t chroma-search-api .
docker run --env-file .env -p 8080:8080 chroma-search-api
```

### Docker Compose

```bash
cd export-sql-chromadb
docker compose up --build
```

ุณุฑูุณ ุจุง ฺฉุงูุชูุฑ Redis ุจุงูุง ูโุขุฏ ู ุชูุงู ูุชุบุฑูุง ูุญุท ุงุฒ ุทุฑู `.env` ุง ูุชุบุฑูุง ูุญุท ุณุณุชู ุชุฒุฑูโูพุฐุฑ ูุณุชูุฏ. Healthcheck ุฏุงุฎู ูุถุนุช `/health` ุฑุง ูพุงุด ูโฺฉูุฏ.
ุฏุฑ ูุงู `docker-compose.yml` ฺฉ ุณุฑูุณ ุงุฎุชุงุฑ `chromadb` ูุฒ ุชุนุฑู ุดุฏู ุชุง ุฏุฑ ูุญุทโูุง ุชูุณุนู ุง ุชุณุช ุจุชูุงูุฏ ChromaDB ุฑุง ุจูโุตูุฑุช ฺฉุงูุชูุฑ ุงุฌุฑุง ฺฉูุฏ. ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ ุณุฑูุฑ ุฎุงุฑุฌุ ูโุชูุงูุฏ ุงู ุณุฑูุณ ุฑุง ุญุฐู ุง ุบุฑูุนุงู ฺฉูุฏ.

## ุฑุงูโุงูุฏุงุฒ ูุญุท Stage (ุชุณุช ู ุชูุณุนู)

ุจุฑุง ุฑุงูโุงูุฏุงุฒ ูุญุท Stage ฺฉูุงุฑ ูุญุท Productionุ ูโุชูุงูุฏ ุงุฒ ุฑุงูููุงูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

### ุฑุงูููุง ุณุฑุน (ุญู ูุดฺฉูุงุช ุฑุงุฌ)

ุงฺฏุฑ ุจุง ุฎุทุงูุง ุฑุงุฌ ููุงุฌู ุดุฏุฏ (ูุซูุงู Collection ูพุฏุง ูุดุฏ ุง `OPENAI_API_KEY` ุชูุธู ูุดุฏู)ุ ุจู [QUICK_FIX_STAGE.md](QUICK_FIX_STAGE.md) ูุฑุงุฌุนู ฺฉูุฏ.

**ูุดฺฉูุงุช ุฑุงุฌ:**
- โ Collection `book_pages` ูพุฏุง ูุดุฏู
- โ `OPENAI_API_KEY` ุชูุธู ูุดุฏู

**ุฑุงูโุญู ุณุฑุน:**
```bash
# ูุฑุงุด ูุงู .env
nano .env

# ุชูุธู collection ููุฌูุฏ
CHROMA_COLLECTION=book_pages_mini

# ุชูุธู OpenAI API Key
OPENAI_API_KEY=sk-your-api-key-here
```

### ุฑุงูููุง ฺฉุงูู Stage Environment

ุจุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉุงูู ูุญุท Stage ุจุง ุชูุงู ุฌุฒุฆุงุชุ ุจู [STAGE_SETUP.md](STAGE_SETUP.md) ูุฑุงุฌุนู ฺฉูุฏ.

**ุฎูุงุตู ูุฑุงุญู:**
1. Clone ูพุฑูฺู ุฏุฑ ูุณุฑ ุฌุฏุงฺฏุงูู (ูุซูุงู `automated-dev`)
2. ุงุฌุงุฏ Virtual Environment ู ูุตุจ dependencies
3. ุชูุธู ูุงู `.env` ุจุง ูพูุฑุช ู collection ูุชูุงูุช
4. ุงุฌุงุฏ Collection ุจุฑุง Stage (ุงุฎุชุงุฑ)
5. ุฑุงูโุงูุฏุงุฒ ุณุฑูุณ ุจุง systemd

**ุชูุงูุชโูุง Stage ู Production:**

| ุชูุธูุงุช | Production | Stage |
|---------|-----------|-------|
| **Port** | 8080 | 8081 |
| **Collection** | `book_pages` | `book_pages_stage` |
| **Path** | `~/saberprojects/automated-Multi-Step-...` | `~/saberprojects/automated-dev/...` |

**ูฺฉุงุช ููู:**
- Stage ู Production ูโุชูุงููุฏ ุงุฒ ููุงู ChromaDB ุงุณุชูุงุฏู ฺฉููุฏ (collection ูุดุชุฑฺฉ ุง ุฌุฏุงฺฏุงูู)
- ุจุฑุง ุฌุฏุงุณุงุฒ ฺฉุงููุ ฺฉ collection ุฌุฏุงฺฏุงูู ุจุฑุง Stage ุงุฌุงุฏ ฺฉูุฏ
- ุจุนุฏ ุงุฒ ุชุณุช ูููู ุฏุฑ Stageุ ูโุชูุงูุฏ ุฏุงุฏูโูุง ุฑุง ุจู Production ููุชูู ฺฉูุฏ

ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ ู ุฑุงูููุง Migrationุ ุจู [STAGE_SETUP.md](STAGE_SETUP.md) ูุฑุงุฌุนู ฺฉูุฏ.

## ุฑุงูโุงูุฏุงุฒ ุณุฑูุณ ุจุง Systemd

ุจุฑุง ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุณุฑูุณ uvicorn ุจุง systemdุ ูโุชูุงูุฏ ุงุฒ ุฑุงูููุงูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

### ูุตุจ ุณุฑุน

```bash
cd export-sql-chromadb
sudo ./systemd/install-uvicorn-service.sh
```

### ุฑุงูููุง ฺฉุงูู

ุจุฑุง ุฌุฒุฆุงุช ฺฉุงูู ูุตุจุ ุชูุธูุงุช ู ุนุจโุงุจุ ุจู [systemd/INSTALL_UVICORN_SERVICE.md](systemd/INSTALL_UVICORN_SERVICE.md) ูุฑุงุฌุนู ฺฉูุฏ.

**ุฏุณุชูุฑุงุช ููุฏ:**
```bash
# ูุถุนุช ุณุฑูุณ
sudo systemctl status chroma-search-api-uvicorn.service

# ูุดุงูุฏู ูุงฺฏโูุง
sudo journalctl -u chroma-search-api-uvicorn.service -f

# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
sudo systemctl restart chroma-search-api-uvicorn.service

# ุชููู
sudo systemctl stop chroma-search-api-uvicorn.service
```

ุจุฑุง ุฑุงูููุง ฺฉุงูู systemd ู ุณุงุฑ ุณุฑูุณโูุงุ ุจู [systemd/README.md](systemd/README.md) ูุฑุงุฌุนู ฺฉูุฏ.